{% extends 'base.html' %}
{% block content %}

<center><h1 class='heading-titles'>Hey, {{ user.fname }} !</h1></center>

<center><h3 class="raleway">Email: {{ user.email }}</h3></center>

{% if savedblockstops %}

<center><h3 class="raleway">Your Saved Top Blocks: </h3></center>
<table class="table table-hover table-striped">
	<th><center>Measurement Chart Name</center></th>
	<th></th>
	<th></th>
	<th></th>
{% for sblocktop in savedblockstops %}
	<tr class="saved-block">
		<td><center><h4>{{ sblocktop.nickname }}</h4></center>
		<input type="hidden" name="{{ sblocktop.chart_id }}" value="{{ sblocktop.chart_id }}">
		<center>
			<td><form action='/print/{{sblocktop.chart_id}}'>
				<button class="btn btn-default">PRINT BLOCK</button>
			</form></td>
			<td><form action='/edit/{{sblocktop.chart_id}}'>
				<button class="btn btn-default" value="{{ sblocktop.chart_id }}">EDIT BLOCK</button>
			</form></td>

			<td><button class="btn btn-danger delete-btn" name='chart-id' value="{{ sblocktop.chart_id }}">DELETE BLOCK</button></td>

		</center>
		</td>
	</tr>

{% endfor %}
</table>
{% endif %}

{% if savedblocksskirts %}

<center><h3 class="raleway">Your Saved Skirt Blocks: </h3></center>
<table class="table table-hover table-striped">
	<th><center>Measurement Chart Name</center></th>
	<th></th>
	<th></th>
	<th></th>
{% for sblockskirt in savedblocksskirts %}
	<tr class="saved-block">
		<td><center><h4>{{ sblockskirt.nickname }}</h4></center>
		<input type="hidden" name="{{ sblockskirt.chart_id }}" value="{{ sblockskirt.chart_id }}">
		<center>
			<td><form action='/print/{{sblockskirt.chart_id}}'>
				<button class="btn btn-default">PRINT BLOCK</button>
			</form></td>
			<td><form action='/edit/{{sblockskirt.chart_id}}'>
				<button class="btn btn-default" value="{{ sblockskirt.chart_id }}">EDIT BLOCK</button>
			</form></td>

			<td><button class="btn btn-danger delete-btn" name='chart-id' value="{{ sblockskirt.chart_id }}">DELETE BLOCK</button></td>

		</center>
		</td>
	</tr>

{% endfor %}
</table>
{% endif %}

<script>

function deleteBlock (evt) {
	evt.preventDefault();

	$.ajax({
		url: "/delete-block",
		data: {'chart-id':$(this).val()},
		type: "POST",
		success: function(response) {
			console.log(response)
		},
		error: function(error) {
			console.log('error')
		}
	});
	$(this).closest('.saved-block').remove();
}

$('.delete-btn').on('click', deleteBlock);

function deleteBlock (evt) {
	evt.preventDefault();

	$.ajax({
		url: "/delete-block",
		data: {'chart-id':$(this).val()},
		type: "POST",
		success: function(response) {
			console.log(response)
		},
		error: function(error) {
			console.log('error')
		}
	});
	$(this).closest('.saved-block').remove();
}

$('.edit-name-btn').on('click', deleteBlock);

</script>

{% endblock %}